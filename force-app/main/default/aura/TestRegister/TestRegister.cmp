<aura:component
	controller="LightningSelfRegisterController"
	implements="forceCommunity:availableForAllPageTypes"
	description="communityExample"
>
	<aura:attribute
		name="accountId"
		type="String"
		required="false"
		description="accountId for creating the user. If not specified, it will create a PersonAccount if possible for B2C scenario. Or otherwise if it's in a community, the community's self-registration accountId will be used."
	/>
	<aura:attribute name="regConfirmUrl" type="String" required="true" />
	<aura:attribute
		name="startUrl"
		type="String"
		required="false"
		description="The url you go to after a successful login"
	/>
	<aura:attribute
		name="showError"
		type="Boolean"
		required="true"
		description=""
		default="false"
		access="private"
	/>
	<aura:attribute
		name="errorMessage"
		type="String"
		required="false"
		description=""
		access="private"
	/>
	<aura:attribute
		name="firstnameLabel"
		type="String"
		required="false"
		default="First Name"
	/>
	<aura:attribute
		name="lastnameLabel"
		type="String"
		required="false"
		default="Last Name"
	/>
	<aura:attribute
		name="emailLabel"
		type="String"
		required="false"
		default="Email"
	/>
	<aura:attribute
		name="passwordLabel"
		type="String"
		required="false"
		default="Create Password"
	/>
	<aura:attribute
		name="confirmPasswordLabel"
		type="String"
		required="false"
		default="Confirm Password"
	/>
	<aura:attribute
		name="submitButtonLabel"
		type="String"
		required="false"
		default="Sign Up"
	/>
	<aura:attribute
		name="includePasswordField"
		type="Boolean"
		required="false"
		default="false"
		description="Whether to include password"
	/>
	<aura:attribute
		name="extraFieldsFieldSet"
		type="String"
		required="false"
		description="A field set name whose fields are desired for user registration"
	/>
	<aura:attribute
		name="extraFields"
		type="list"
		required="false"
		description="A field set name whose fields are desired for user registration"
	/>
	<aura:handler name="init" value="{!this}" action="{!c.initialize}" />
	<aura:attribute
		name="expid"
		type="String"
		required="false"
		description="The branding experience ID"
	/>

	<aura:registerevent name="sitePropagatedStartUrl" type="c:setStartUrl" />
	<aura:handler name="init" value="{!this}" action="{!c.initialize}" />
	<aura:dependency resource="c:setStartUrl" type="EVENT" />
	<!-- Please uncomment
	<aura:dependency resource="siteforce:registerQueryEventMap" type="EVENT"/>
	-->
	<aura:handler event="c:setStartUrl" action="{!c.setStartUrl}" />
	<aura:handler event="c:setExpId" action="{!c.setExpId}" />
	<aura:dependency resource="c:setExpId" type="EVENT" />

	<lightning:card title="Register to our comunity">
		<div class="slds-p-horizontal_medium">
			<aura:renderIf isTrue="{!v.showError}">
				<div id="error">
					<ui:outputRichText value="{!v.errorMessage}" />
				</div>
			</aura:renderIf>

			<!--
			<lightning:input
				required="true"
				type="text"
				aura:id="firstname"
				label="{!v.firstnameLabel}"
				placeholder="Joe" />
			<lightning:input
				required="true"
				type="text"
				aura:id="field"
				label="{!v.lastnameLabel}"
				placeholder="Doe" />
			<lightning:input
				required="true"
				type="email"
				aura:id="field"
				label="{!v.emailLabel}"
				placeholder="joe.doe@test.com" />

			<aura:iteration aura:id="extraFields" items="{!v.extraFields}" var="curField" indexVar="index">
				<lightning:input
					value="{!curField.value}"
					aura:id="{!curField.fieldPath}"
					label="{!curField.label}"
					placeholder="{!curField.label}" />
			</aura:iteration>

			<aura:renderIf isTrue="{!v.includePasswordField}">
				<lightning:input
					required="true"
					type="password"
					label="{!v.passwordLabel}"
					aura:id="field"
					placeholder="Enter Password" />
				<lightning:input
					required="true"
					type="password"
					label="{!v.passwordLabel}"
					aura:id="field"
					placeholder="Confirm Password" />
			</aura:renderIf>
			-->
			<div class="slds-form-element">
				<label class="slds-form-element__label">
					<abbr class="slds-required" title="required">* </abbr
					>{!v.firstnameLabel}</label
				>
				<div class="slds-form-element__control">
					<ui:inputText
						required="true"
						value=""
						aura:id="firstname"
						placeholder="{!v.firstnameLabel}"
						keyup="{!c.onKeyUp}"
						class="slds-input"
					/>
				</div>
			</div>

			<div class="slds-form-element">
				<label class="slds-form-element__label">
					<abbr class="slds-required" title="required">* </abbr
					>{!v.lastnameLabel}</label
				>
				<div class="slds-form-element__control">
					<ui:inputText
						value=""
						aura:id="lastname"
						placeholder="{!v.lastnameLabel}"
						keyup="{!c.onKeyUp}"
						class="slds-input"
					/>
				</div>
			</div>

			<div class="slds-form-element">
				<label class="slds-form-element__label">
					<abbr class="slds-required" title="required">* </abbr
					>{!v.lastnameLabel}</label
				>
				<div class="slds-form-element__control">
					<ui:inputText
						value=""
						aura:id="email"
						placeholder="{!v.emailLabel}"
						keyup="{!c.onKeyUp}"
						class="slds-input"
					/>
				</div>
			</div>

			<aura:iteration
				aura:id="extraFields"
				items="{!v.extraFields}"
				var="curField"
				indexVar="index"
			>
				<div class="slds-form-element">
					<label class="slds-form-element__label"
						>{!v.lastnameLabel}</label
					>
					<div class="slds-form-element__control">
						<ui:inputText
							value="{!curField.value}"
							aura:id="{!curField.fieldPath}"
							placeholder="{!curField.label}"
							keyup="{!c.onKeyUp}"
							class="slds-input"
						/>
					</div>
				</div>
			</aura:iteration>

			<aura:renderIf isTrue="{!v.includePasswordField}">
				<div class="slds-form-element">
					<label class="slds-form-element__label">
						<abbr class="slds-required" title="required">* </abbr
						>{!v.lastnameLabel}</label
					>
					<div class="slds-form-element__control">
						<ui:inputSecret
							value=""
							aura:id="password"
							placeholder="{!v.passwordLabel}"
							keyup="{!c.onKeyUp}"
							class="slds-input"
						/>
					</div>
				</div>
				<div class="slds-form-element">
					<label class="slds-form-element__label">
						<abbr class="slds-required" title="required">* </abbr
						>{!v.lastnameLabel}</label
					>
					<div class="slds-form-element__control">
						<ui:inputSecret
							value=""
							aura:id="confirmPassword"
							placeholder="{!v.confirmPasswordLabel}"
							keyup="{!c.onKeyUp}"
							class="slds-input"
						/>
					</div>
				</div>
			</aura:renderIf>
		</div>

		<aura:set attribute="footer">
			<lightning:button
				aura:id="submit"
				type="submit"
				label="{!v.submitButtonLabel}"
				onclick="{! c.handleSelfRegister }"
			/>

			<!--
			<div class="sfdc">
				<ui:button aura:id="submitButton" label="{!v.submitButtonLabel}" press="{!c.handleSelfRegister}" class="sfdc_button"/>
			</div>
			-->
		</aura:set>
	</lightning:card>
</aura:component>
